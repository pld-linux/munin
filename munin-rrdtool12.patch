--- munin-1.3.2/server/munin-graph.in.orig	2005-04-15 22:31:22.000000000 +0200
+++ munin-1.3.2/server/munin-graph.in	2005-12-23 17:09:54.000000000 +0100
@@ -649,10 +649,10 @@
 	    elsif ($global_headers == 1)
 	    {
 		push (@rrd, "COMMENT:" . (" " x $max_field_len));
-		push (@rrd, "COMMENT: Cur:");
-		push (@rrd, "COMMENT:Min:");
-		push (@rrd, "COMMENT:Avg:");
-		push (@rrd, "COMMENT:Max:  \\j");
+		push (@rrd, "COMMENT: Cur\\:");
+		push (@rrd, "COMMENT:Min\\:");
+		push (@rrd, "COMMENT:Avg\\:");
+		push (@rrd, "COMMENT:Max\\:  \\j");
 		$global_headers++;
 	    }
 
@@ -725,13 +725,13 @@
 	    }
 	    else
 	    {
-		push (@rrd, "COMMENT: Cur:") unless $global_headers;
+		push (@rrd, "COMMENT: Cur\\:") unless $global_headers;
 		push (@rrd, "GPRINT:c$rrdname:LAST:%6.2lf" . (munin_get_bool_val ($node->{client}->{$service}->{graph_scale}, "yes")?"%s":"") . "");
-		push (@rrd, "COMMENT: Min:") unless $global_headers;
+		push (@rrd, "COMMENT: Min\\:") unless $global_headers;
 		push (@rrd, "GPRINT:i$rrdname:MIN:%6.2lf" . (munin_get_bool_val ($node->{client}->{$service}->{graph_scale}, 1)?"%s":"") . "");
-		push (@rrd, "COMMENT: Avg:") unless $global_headers;
+		push (@rrd, "COMMENT: Avg\\:") unless $global_headers;
 		push (@rrd, "GPRINT:g$rrdname:AVERAGE:%6.2lf" . (munin_get_bool_val ($node->{client}->{$service}->{graph_scale}, 1)?"%s":"") . "");
-		push (@rrd, "COMMENT: Max:") unless $global_headers;
+		push (@rrd, "COMMENT: Max\\:") unless $global_headers;
 		push (@rrd, "GPRINT:a$rrdname:MAX:%6.2lf" . (munin_get_bool_val ($node->{client}->{$service}->{graph_scale}, 1)?"%s":"") . "\\j");
 		push (@{$total_pos{'min'}}, "i$rrdname");
 		push (@{$total_pos{'avg'}}, "g$rrdname");
@@ -792,13 +792,13 @@
 	    
 	    push (@rrd, "CDEF:dpostotal=ipostotal,UN,ipostotal,UNKN,IF");
 	    push (@rrd, "LINE1:dpostotal#000000:" . $node->{client}->{$service}->{graph_total} . (" " x ($max_field_len - length ($node->{client}->{$service}->{graph_total}) + 1)));
-	    push (@rrd, "COMMENT: Cur:") unless $global_headers;
+	    push (@rrd, "COMMENT: Cur\\:") unless $global_headers;
 	    push (@rrd, "GPRINT:gpostotal:LAST:%6.2lf" . (munin_get_bool_val ($node->{client}->{$service}->{graph_scale}, 1)?"%s":"") . "");
-	    push (@rrd, "COMMENT: Min:") unless $global_headers;
+	    push (@rrd, "COMMENT: Min\\:") unless $global_headers;
 	    push (@rrd, "GPRINT:ipostotal:MIN:%6.2lf" . (munin_get_bool_val ($node->{client}->{$service}->{graph_scale}, 1)?"%s":"") . "");
-	    push (@rrd, "COMMENT: Avg:") unless $global_headers;
+	    push (@rrd, "COMMENT: Avg\\:") unless $global_headers;
 	    push (@rrd, "GPRINT:gpostotal:AVERAGE:%6.2lf" . (munin_get_bool_val ($node->{client}->{$service}->{graph_scale}, 1)?"%s":"") . "");
-	    push (@rrd, "COMMENT: Max:") unless $global_headers;
+	    push (@rrd, "COMMENT: Max\\:") unless $global_headers;
 	    push (@rrd, "GPRINT:apostotal:MAX:%6.2lf" . (munin_get_bool_val ($node->{client}->{$service}->{graph_scale}, 1)?"%s":"") . "\\j");
 	}
 
@@ -811,7 +811,10 @@
 	    push @complete, @{&get_header ($node, $config, $domain, $name, $service, $time)};
 	    push @complete, @rrd;
 
-	    push (@complete, "COMMENT:Last update: " . localtime($lastupdate) .  "\\r");
+	    my $localtimeesc = localtime($lastupdate);
+	    $localtimeesc =~ s/:/\\:/g;
+	    push (@complete, "COMMENT:Last update\\: " . $localtimeesc .  "\\r");
+#	    push (@complete, "COMMENT:Last update\\: " . localtime($lastupdate) .  "\\r");
 	    
 	    if (time - 300 < $lastupdate)
 	    {
@@ -841,7 +844,10 @@
 			push @rrd_sum, "--end",(int($lastupdate/$resolutions{$time}))*$resolutions{$time};
 		}
 		push @rrd_sum, @rrd;
-		push (@rrd_sum, "COMMENT:Last update: " . localtime($lastupdate) .  "\\r");
+		my $localtimeesc = localtime($lastupdate);
+		$localtimeesc =~ s/:/\\:/g;
+		push (@rrd_sum, "COMMENT:Last update\\: " . $localtimeesc .  "\\r");
+#		push (@rrd_sum, "COMMENT:Last update\\: " . localtime($lastupdate) .  "\\r");
 
 		my $labelled = 0;
 		my @defined = ();
--- munin-1.3.2/server/munin-cron.in.orig	2005-12-23 17:12:30.865732840 +0100
+++ munin-1.3.2/server/munin-cron.in	2005-12-23 17:12:42.065030288 +0100
@@ -1,6 +1,6 @@
 #!/bin/sh
 [ -x @@LIBDIR@@/munin-update ] && @@LIBDIR@@/munin-update $@;
 [ -x @@LIBDIR@@/munin-limits ] && @@LIBDIR@@/munin-limits $@;
-[ -x @@LIBDIR@@/munin-graph  ] && nice @@LIBDIR@@/munin-graph --cron $@;
+[ -x @@LIBDIR@@/munin-graph  ] && nice @@LIBDIR@@/munin-graph --cron $@ 2>&1 | grep -v "*** attempt to put segment in horiz list twice";
 [ -x @@LIBDIR@@/munin-html   ] && nice @@LIBDIR@@/munin-html $@;
 
